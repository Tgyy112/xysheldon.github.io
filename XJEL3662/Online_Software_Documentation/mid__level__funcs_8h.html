<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ELEC/XJEL3662 Calculator project: mid_level_funcs.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ELEC/XJEL3662 Calculator project
   &#160;<span id="projectnumber">2019/20 (software v1.04)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">mid_level_funcs.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="mid__level__funcs_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Keyboard functions</div></td></tr>
<tr class="memitem:a6ef7a8438bc287287a68daebcd07d609"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mid__level__funcs_8h.html#a6ef7a8438bc287287a68daebcd07d609">GetKeyboardChar</a> ()</td></tr>
<tr class="separator:a6ef7a8438bc287287a68daebcd07d609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20008a9ac840d7d515dea15275e6901d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mid__level__funcs_8h.html#a20008a9ac840d7d515dea15275e6901d">KeyboardReadRowCol</a> (int *row, int *col)</td></tr>
<tr class="separator:a20008a9ac840d7d515dea15275e6901d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a777dcf04b4d1321dab187036b058157e"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mid__level__funcs_8h.html#a777dcf04b4d1321dab187036b058157e">KeyboardRowCol2Char</a> (int row, int col)</td></tr>
<tr class="separator:a777dcf04b4d1321dab187036b058157e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Display functions</div></td></tr>
<tr class="memitem:ac154eab6d517984c85c410d9057d2fc0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mid__level__funcs_8h.html#ac154eab6d517984c85c410d9057d2fc0">PrintString</a> (short int line, short int char_pos, const char *string)</td></tr>
<tr class="separator:ac154eab6d517984c85c410d9057d2fc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Set of functions at middle level (above low-level hardware drivers but below the high level) for the 3662 calculator mini-project.</p>
<p>This .h file defines the functions which you must write. Your functions must stick to these specifications: the function name, parameters (order, type and what they mean), return type (if any) and what the function does. You will be marked (amongst other things) on whether your functions meet these specifications. Thus you must not modify this .h file.</p>
<p>Please note also the following requirement: your code here may not access any hardware directly. For example, to write to a keyboard column you must not use the Tiva commands to access the output port. You must do it by calling a routine in the module <em>low_level_funcs_tiva</em> (q.v. for details). If you ignore this requirement it will be impossible to compile your code when marking it, and you will lose marks.</p>
<p>Dr Chris Trayner, 2019 September </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a6ef7a8438bc287287a68daebcd07d609"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ef7a8438bc287287a68daebcd07d609">&#9670;&nbsp;</a></span>GetKeyboardChar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char GetKeyboardChar </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the next character from keyboard.</p>
<dl class="section return"><dt>Returns</dt><dd>The character read.</dd></dl>
<p>This function reads from the 16-key keypad. It waits until the user has pressed a key and then returns it as an ASCII character.</p>
<p>Note that the character returned must be the one marked on the keyboard, not the one that will be displayed.</p>
<p>In practice, this function will probably work by calling <a class="el" href="mid__level__funcs_8h.html#a20008a9ac840d7d515dea15275e6901d">KeyboardReadRowCol()</a> and <a class="el" href="mid__level__funcs_8h.html#a777dcf04b4d1321dab187036b058157e">KeyboardRowCol2Char()</a>. </p>

</div>
</div>
<a id="a20008a9ac840d7d515dea15275e6901d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20008a9ac840d7d515dea15275e6901d">&#9670;&nbsp;</a></span>KeyboardReadRowCol()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KeyboardReadRowCol </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>col</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Waits until a keyboard key is pressed, then returns its row and column numbers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">row</td><td>The row number of the key pressed. Counts from 1 (top) to 4 (bottom). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">col</td><td>The column number of the key pressed. Counts from 1 (leftmost) to 4 (rightmost).</td></tr>
  </table>
  </dd>
</dl>
<p>This assumes that exactly one key is pressed. If none is currently pressed, the function waits until one is pressed and then returns its co-ordinates.</p>
<p>Extra test for extra marks: If two or more keys are pressed at the same time, the function waits until only one is pressed and returns that key's row and column. </p>

</div>
</div>
<a id="a777dcf04b4d1321dab187036b058157e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a777dcf04b4d1321dab187036b058157e">&#9670;&nbsp;</a></span>KeyboardRowCol2Char()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char KeyboardRowCol2Char </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>col</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Converts keyboard row and column numbers to an ASCII character.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">row</td><td>The row number of the key pressed. Counts from 1 (top) to 4 (bottom). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">col</td><td>The column number of the key pressed. Counts from 1 (leftmost) to 4 (rightmost). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ASCII value of the character.</dd></dl>
<p>The character returned must be the one marked on the keyboard. Note that A, B, C and D are upper case (capital letters).</p>
<p>Note that the character returned must be the one marked on the keyboard, not the one that will be displayed. This is because this display character cannot always be known at this low software level. For instance, the key labelled with A might be displayed as + or x, depending on whether the Shift key has just been pressed.</p>
<p>Extra test for extra marks: Check for invalid row and column numbers. If either is invalid, return the character '?'. </p>

</div>
</div>
<a id="ac154eab6d517984c85c410d9057d2fc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac154eab6d517984c85c410d9057d2fc0">&#9670;&nbsp;</a></span>PrintString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PrintString </td>
          <td>(</td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>char_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Print a string at a specified location on the LCD display.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">line</td><td>The line number, 1 for top or 2 for bottom. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">char_pos</td><td>The character position, counting from 1 at the left to 16 at the right. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">string</td><td>A C-format string to be displayed.</td></tr>
  </table>
  </dd>
</dl>
<p>The string should be displayed on the specified line starting at the specified position. If the string does not cover the entire display line, the other characters must not be changed. No characters should be displayed beyond the end of the display line. Extra marks will be given for software that checks this. Any such extra characters should simply be ignored.</p>
<p>Note that <em>line</em> and <em>char_pos</em> count from 1 not 0.</p>
<p>This function will call functions in <em>low_level_funcs_tiva</em> to set up the print position and write individual characters. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Nov 8 2019 16:29:25 for ELEC/XJEL3662 Calculator project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
