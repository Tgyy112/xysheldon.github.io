<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ELEC/XJEL3662 Calculator project: high_level_funcs.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ELEC/XJEL3662 Calculator project
   &#160;<span id="projectnumber">2019/20 (software v1.04)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>


</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">high_level_funcs.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="high__level__funcs_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Keyboard functions</div></td></tr>
<tr class="memitem:ae8f9b2ee0bd300257a1fdee051e4cf5d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="high__level__funcs_8h.html#ae8f9b2ee0bd300257a1fdee051e4cf5d">ReadAndEchoInput</a> (char *input_buffer, int input_buffer_size)</td></tr>
<tr class="separator:ae8f9b2ee0bd300257a1fdee051e4cf5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Display functions</div></td></tr>
<tr class="memitem:a9b311485584ec19199229a6c1d9ded0c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="high__level__funcs_8h.html#a9b311485584ec19199229a6c1d9ded0c">DisplayResult</a> (double answer)</td></tr>
<tr class="separator:a9b311485584ec19199229a6c1d9ded0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d0b01d2e0948bf7c82e65b4d73c53f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="high__level__funcs_8h.html#a7d0b01d2e0948bf7c82e65b4d73c53f3">DisplayErrorMessage</a> (const char *error_message_line1, const char *error_message_line2)</td></tr>
<tr class="separator:a7d0b01d2e0948bf7c82e65b4d73c53f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Set of functions at high level (above mid level but below main) for the 3662 calculator mini-project.</p>
<p>This .h file defines the functions which you must write. Your functions must stick to these specifications: the function name, parameters (order, type and what they mean), return type (if any) and what the function does. You will be marked (amongst other things) on whether your functions meet these specifications. Thus you must not modify this .h file.</p>
<p>Please note also the following requirement: your code here may not access any hardware directly. For example, to write to a keyboard column you must not use the Tiva commands to access the output port. You must do it by calling functions in a lower level module. If you ignore this requirement it will be impossible to compile your code when marking it, and you will lose marks. (In practice, this <em>high_level_funcs</em> module will call functions in <em>mid_level_funcs</em>, and they will call functions in <em>low_level_funcs_tiva</em> to do the actual I/O. This <em>high_level_funcs</em> may also call <em>low_level_funcs_tiva</em> directly to clear the display.)</p>
<p>Dr Chris Trayner, 2019 September </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a7d0b01d2e0948bf7c82e65b4d73c53f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d0b01d2e0948bf7c82e65b4d73c53f3">&#9670;&nbsp;</a></span>DisplayErrorMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DisplayErrorMessage </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>error_message_line1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>error_message_line2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Display an error message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">error_message_line1</td><td>A C-format string containing the first line of the error message. It will have a maximum of 16 characters plus the trailing null. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">error_message_line2</td><td>A C-format string containing the second line of the error message. It will have a maximum of 16 characters plus the trailing null.</td></tr>
  </table>
  </dd>
</dl>
<p>This should clear the display and then display the two strings on their respective lines. Since the two parts of the message may each be up to 16 characters long, they should start at the left-hand end of the line. No cursor should be displayed.</p>
<p>These error messages are provided by the system and you may assume they are no more than 17 chars long (including the trailing null). I wrote these messages, and I never make misstakes.</p>
<p>Actually, do you believe that? If you're a cautious programmer, you will ignore what I just said and add an error check that the strings are not too long. </p>

</div>
</div>
<a id="a9b311485584ec19199229a6c1d9ded0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b311485584ec19199229a6c1d9ded0c">&#9670;&nbsp;</a></span>DisplayResult()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DisplayResult </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>answer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Display the result of the calculation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">answer</td><td>The number to be displayed. Note that this is of type <em>double</em>, i.e. higher precision floating point than <em>float</em>. This takes more memory space and (on a small processor) more processor time, but normal <em>float</em> can have poor enough accuracy and give bad results.</td></tr>
  </table>
  </dd>
</dl>
<p>The result should be displayed on the LCD. The text displayed must not go beyond the end of the display. This probably means that it will be limited to one line of 16 characters maximum. It could go on to the second line, but this would make it harder to read and would be of questionable benefit.</p>
<p>The line(s) where the answer is displayed should be cleared first. No cursor should be displayed on the line with the result.</p>
<p>Some thought should be given to the format of the display, as the number could be very small or very large. Four possibilities are listed here, of increasing level of refinement:</p><ol type="1">
<li>Scientific format, e.g. 1.23E4. This will work for all numbers, and will be needed for very large or very small ones. However, it is clumsy for middle-size ones, e.g. 1.234E1 for 12.34.</li>
<li>Middle-size numbers displayed normally (e.g. 12.34 or -0.678), with very large or small ones displayed in scientific format.</li>
<li>Choosing the number of decimal places to avoid trailing zeroes, e.g. 12.34 not 12.3400000.</li>
<li>Displaying integers as such, e.g. 42 not 42.0. You should also think about the number of significant figures to display. A 16-character display can accommodate a minus, a decimal point and 14 digits. This is equivalent to about 46-bit accuracy, which is probably more than type double will provide.</li>
</ol>
<p>Writing software to convert a floating-point number to ASCII characters would be very time-consuming. You are advised to use the <em>sprintf()</em> function. You can then call <a class="el" href="mid__level__funcs_8h.html#ac154eab6d517984c85c410d9057d2fc0">PrintString()</a> in <em>mid_level_funcs</em> with the string.</p>
<p>Note that this function only needs to handle valid floating-point numbers. If the calculation produced anything invalid, e.g. from dividing by zero, <a class="el" href="calculate__answer_8c.html#a625d3709e31ed952a71ead3051d40bdf">CalculateAnswer()</a> would have issued an error message. </p>

</div>
</div>
<a id="ae8f9b2ee0bd300257a1fdee051e4cf5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8f9b2ee0bd300257a1fdee051e4cf5d">&#9670;&nbsp;</a></span>ReadAndEchoInput()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ReadAndEchoInput </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>input_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>input_buffer_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read characters from the keyboard and echo them on the LCD. Assemble them into a C-format string and return this when the End Input (*) key is pressed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">input_buffer</td><td>An array of <em>char</em> to be used as a C-format string. When the function exits, this must contain the calculator input edited by the user. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">input_buffer_size</td><td>The size of <em>input_buffer</em>, including the trailing null.</td></tr>
  </table>
  </dd>
</dl>
<p>The function must wait until the first key is pressed. Until then, the user may be reading the previous answer. Once the first key is pressed, the display line used to echo input is cleared and a cursor is placed at the start of that line. (You might decide to clear the other line too.)</p>
<p>Then this function reads characters as they are entered. Each character is</p><ul>
<li>If it is A, B or C, translated into the display character. This depends on whether the Shift key has been pressed.</li>
<li>Entered into <em>input_buffer</em>.</li>
<li>Displayed on the LCD at the next character position. The cursor should then be moved to the next position, unless this would move it beyond the end of the line.</li>
</ul>
<p>There are some special cases to consider:</p><ul>
<li>The software must keep track of whether the Shift key has just been pressed.</li>
<li>If the Rubout key is pressed, the previous character entry must be undone. This means changing both the <em>input_buffer</em> and the display. However, if the cursor is already at the starting position nothing should be done. You should also consider what to do if the character to be rubbed out is Shift.</li>
<li>If the End Input (*) key is pressed, the input is complete. The function should return.</li>
<li><p class="startli">The function should not accept more than <em>input_buffer_size-1</em> characters. The -1 is because one space is reserved for the trailing null. In the simple case, this will set a limit of 16 characters which is all that will fit on one line of display.</p>
<p class="startli">If the user types more characters, they should be ignored: neither echoed nor added to <em>input_buffer</em>. It would be useful to alert the user, e.g. by flashing the display briefly and then re-displaying the previously echoed input.</p>
<p class="startli">After hitting this limit (and possibly warning the user), one character may be validly entered: Rubout. You might also make it legal to enter End Input.</p>
</li>
</ul>
<p>Note that the Shift, Rubout and End Input keys should not be entered in <em>input_buffer</em> or echoed on the LCD.</p>
<p>For convenience, here are the character translations. Note that the x is lower case. </p><table class="doxtable">
<tr>
<th align="center">Key </th><th align="center">Unshifted </th><th align="center">Shifted  </th></tr>
<tr>
<td align="center">A </td><td align="center">+ </td><td align="center">x </td></tr>
<tr>
<td align="center">B </td><td align="center">- </td><td align="center">/ </td></tr>
<tr>
<td align="center">C </td><td align="center">. </td><td align="center">E </td></tr>
</table>
<p>D is the shift key, End Input is asterik (*) and Rubout is hash (#).</p>
<p>This function will presumably call functions in <em>mid_level_funcs</em> to read each character from keyboard and print it to the LCD. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Nov 8 2019 16:29:25 for ELEC/XJEL3662 Calculator project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
