<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ELEC/XJEL3662 Calculator project: calculate_answer.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ELEC/XJEL3662 Calculator project
   &#160;<span id="projectnumber">2019/20 (software v1.04)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">calculate_answer.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="calculate__answer_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6bb341aca6b054685a829fb358fe6cc3"><td class="memItemLeft" align="right" valign="top"><a id="a6bb341aca6b054685a829fb358fe6cc3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calculate__answer_8h.html#a6bb341aca6b054685a829fb358fe6cc3">MAX_ERROR_MESSAGES</a>&#160;&#160;&#160;20</td></tr>
<tr class="memdesc:a6bb341aca6b054685a829fb358fe6cc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of the error message arrays. <br /></td></tr>
<tr class="separator:a6bb341aca6b054685a829fb358fe6cc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a625d3709e31ed952a71ead3051d40bdf"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="calculate__answer_8h.html#a625d3709e31ed952a71ead3051d40bdf">CalculateAnswer</a> (char *input_buffer, int input_buffer_size, int *error_ref_no)</td></tr>
<tr class="separator:a625d3709e31ed952a71ead3051d40bdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Set of functions at the bottom level for the 3662 calculator mini-project. These are calculation function and associated constants.</p>
<p>The software to perform the actual calculation is provided here: it is the function <a class="el" href="calculate__answer_8h.html#a625d3709e31ed952a71ead3051d40bdf">CalculateAnswer()</a>. It takes the input string read from keyboard and</p><ol type="1">
<li>Checks it for any input syntax errors (e.g. two plusses together).</li>
<li>If there are no errors, calculates the answer and returns it as a float. (Actually a double-precision float.)</li>
<li>If there are errors, produces an error message. Any error message is indicated by the variable <em>error_ref_no</em>. This is used as the subscript of the two arrays <em>error_message_line1</em> and <em>error_message_line2</em>. Each error message is divided into two lines of 16 characters max, split across these two arrays, to facilitate display on the 2-line 16-character display. These two arrays are also defined in this .h file, making them available to the calling program.</li>
</ol>
<p>This module is provided for you ready written. You must not modify it. (This would not gain any extra marks, and might lose you marks.) </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a625d3709e31ed952a71ead3051d40bdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a625d3709e31ed952a71ead3051d40bdf">&#9670;&nbsp;</a></span>CalculateAnswer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CalculateAnswer </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>input_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>input_buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>error_ref_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Parse the input from keyboard and produce either the answer or an error message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">input_buffer</td><td>A string with the characters read from keyboard. This should be C-format, i.e. an array of <em>char</em> terminated with a null. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">input_buffer_size</td><td>The size of the <em>input_buffer</em> array. The software will not read <em>input_buffer</em> beyond this. This is a precaution agains <em>input_buffer</em> lacking its terminating null. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">error_ref_no</td><td>The reference number of the error, if any. If there is no error, this is set to zero. If there is an error, this number can be used to subscript the two arrays <em>error_message_line1</em> and <em>error_message_line2</em> to produce an error message. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If there was no error, the result of the calculation is returned. If there was an error, 0.0 is returned.</dd></dl>
<p>This function handles the input string in <em>input_buffer</em>. It will only read until the terminating null. If this is missing it will not read more than <em>input_buffer_size</em> characters. (The lack of a terminating null is an error and will be reported as such. Note that this is a software bug, not a user input error.)</p>
<p>The user will have ended their input string with an equals sign. This must not be included in <em>input_buffer</em>.</p>
<p>The function then parses the input string (checks it for syntax errors). The string should be a normal valid calculation, so syntax errors are such things as two plus signs together or two decimal points in the same number. The only valid characters are the digits and '+', '-', 'x' (lower case) and '/'. (The equals sign and rubout should be handled by your keyboard reading function and not handed to <a class="el" href="calculate__answer_8c.html#a625d3709e31ed952a71ead3051d40bdf">CalculateAnswer()</a>.)</p>
<p>If the parsing shows no errors, the result is calculated and returned as the result of the function. <em>error_ref_no</em> is set to zero indicating no error. However, if the calculation is syntactically valid but produces an invalid result (e.g. divide by zero), this will be reported as an error.</p>
<p>If the parsing shows an error, <em>error_ref_no</em> is set to a non-zero number indicating the error. If more than one error occurred, only one will be indicated; it is undefined which. The value 0.0 will be returned as the result of the function.</p>
<p>Parse the input from keyboard and produce either the answer or an error message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">input_buffer</td><td>A string with the characters read from keyboard. This should be C-format, i.e. an array of <em>char</em> terminated with a null. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">input_buffer_size</td><td>The size of the <em>input_buffer</em> array. The software will not read <em>input_buffer</em> beyond this. This is a precaution agains <em>input_buffer</em> lacking its terminating null. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">error_ref_no</td><td>The reference number of the error, if any. If there is no error, this is set to zero. If there is an error, this number can be used to subscript the two arrays <em>error_message_line1</em> and <em>error_message_line2</em> to produce an error message. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If there was no error, the result of the calculation is returned. If there was an error, 0.0 is returned.</dd></dl>
<p>For the functional specification, see the documentation of this function in <a class="el" href="calculate__answer_8h.html">calculate_answer.h</a>. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Nov 8 2019 16:29:25 for ELEC/XJEL3662 Calculator project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
